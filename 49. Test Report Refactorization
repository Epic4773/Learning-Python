import json

def test_report():
    
    folder = 'json_files'
    
    try:
        with open(folder+'/tests.json') as file:
            test_list = json.load(file)
        with open(folder+'/classes.json') as file:
            class_list = json.load(file)
            
    except FileNotFoundError:
        with open(folder+'/tests.json', 'w') as tests, open(folder+'/classes.json','w') as classes:
            yes_no = input("would you like to add another class of test results? (y/n)")
            class_list = []
            test_list = []
            
            while yes_no=='y':
                numbered = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th',
                             '11th', '12th', '13th', '14th', '15th', '16th', '17th', '18th', '19th',
                             '20th', '21st', '22nd', '23rd', '24th', '25th', '26th', '27th', '28th',
                             '29th', '30th', '31st']
                subject = input("What is the subject of the class? ")
                class_list.append(subject)
                num_students =int(input("How many students are in the class? "))
                for x in range(num_students):
                    name = input(f"What is the name of the {numbered[x]} student in {subject}? ")
                    score = int(input(f"What score did {name} recieve on their test?"))
                    key_value = {name:score}
                    test_list.append(key_value)
                yes_no = input("would you like to add another class of test results? (y/n)")
                
            json.dump(test_list, tests)
            json.dump(class_list, classes)
        
        print(f"Your test scores have been saved.")
        for class_num in range(len(class_list)):
            total = 0
            for student, score in test_list[class_num].items():
                total+=score
            avg = total/len(test_list)
            print(f"The avereage for {class_list[class_num]} is {avg}")
                
    else:
        print(f"You're previous test scores have been loaded.")
        for class_num in range(len(class_list)):
            total = 0
            for student, score in test_list[class_num].items():
                total+=score
            avg = total/len(test_list)
            print(f"The avereage for {class_list[class_num]} is {avg}")

test_report()
